field = [".#..#......................#........#........................................#.............#......#...............#...............",
  ".......#...........#........................#..............#.....#......#..##............#.....#.....................##...........",
  ".#.....#........#.##..#.............#...........#................#............#.#.........#.....................#......#..........",
  "...........#...#.#.................................#.....................#............#.....#.#................#..#...............",
  "..................................................................................#...............................................",
  "..................#....................#.................#.........#..#.................#...........#...................#.........",
  ".......#......#................#.......#............................#.................#.........................#...#........#....",
  "................................#..............................................................#.........#.........#..............",
  ".......................................................#............#......#........#.#...................#............#..........",
  ".....#......#..............................................#..............................................#.......................",
  "......#..........................................................................................#................#...............",
  "............................#..................#............#..#.#..............#..........#......................................",
  "......#..........................#...................#..........#....#.........................#.......................#....#..#..",
  "..................................#..........#....................................................................#........#......",
  "..#.................................#..................................................#......................#...................",
  ".....#............#..................#......#...................................#.#........#.#......#........#....................",
  "........#......................#.....#...#.##................................#......#.............................................",
  "...........#.........#...............................................................................#............................",
  "..................................#...##...............................#.............#.........................................##.",
  "..........................#.#..#......................................#........#..............................#...................",
  "......#...........###..#....#........................................................................................#............",
  "..............#.....................................................................#......##.............#.......................",
  ".................................#...................#.........#..............................................#...........#.......",
  "....................#..#...................................................#................................#........#............",
  "........................................#.#.#..................#....................#.....#.................#.....................",
  ".........................#....#.....#.................##...............................................#.......#...#..............",
  "..#.........................#....................#.........................#..............................#...................#...",
  "..................##....#..#..#.#.................................................................#...............................",
  "..............#........................................................#.............................#......#.....................",
  ".................#...........#........................#......#..........##....................#.................................#.",
  "..........................#.............................................#..#.................................#.........#...#......",
  "..#..................##.....................................................#.....................#.......#.....#.................",
  "....#.........................................#..................#.#.........................#.......................#............",
  "...#.....#.#..............................................................#................#......................#...#........#..",
  ".............................#..#......#.....................................................##...................................",
  "...........#......................#....#.........#........................#......................................................#",
  "............#.............................................#.................................#....#................................",
  "..............................................................#.............#................#.........#.........................#",
  "..........................................#....#........#......................#.....#.............#..............................",
  "..#..#.............#...............................................#.....................................................#........",
  "................................................................................#.............#...................................",
  "...............................................#.......................#................#............#....................#.#.....",
  ".......................#.............................#.#..................#...#....#.................................#...#.....#..",
  ".......................#...........................#.........................................#.........#.........................#",
  "...#.........#.....#..........................................#...................................................................",
  "..........#..#...#...#........................#..........#..........................................#......#.........#............",
  "...............#............................#.#...................##.....................................................#........",
  ".........................................................#....................#........................#.........#....##....#...#.",
  "......................................#.#................................................#........................#...............",
  "..........#.............................................................#..#..#..............................#...#...#.#..........",
  ".........#.....................................................................................#...........#..#......#..........#.",
  "............................#....................#..............#...#.............................................................",
  "...........................................................#........#......................#.................................#....",
  ".........#..................#.........#.......#...............................#................#.............#...........#........",
  "............................#.........#...........................................................................................",
  "................................#...........#.......................................#..........#.#.....#..........................",
  "..........................................#.................................................................................#.....",
  "..............#...............................................#...................................................................",
  "...#....#.....................#..........#..#......................#..............................................................",
  ".......................#..........#.................................................#......#.............#........#....#..........",
  ".........................................................................#.#......................................#...............",
  "..........................................#.......................#...............................................#.........#...#.",
  "............................#.......................................................#...#.........#..#...##........#..............",
  "...........................................................................#..............#..........#.............#..............",
  "#............#..#...#..#........#....................#...........#..#.........................................#..........#........",
  "...........................................................................#......#..^.........#.........#........................",
  "......#............................#.............................................................................................#",
  "......................#.....#.......................................................#........................#..........#.........",
  "................#....#.......#.............................#..............#....................#....#....................#........",
  "......#...................................#..................................................................#....................",
  ".....#..............#.#...........................................................#.................#.........#......#........#...",
  "..#..#..#..#........#...........#...........#....##...........#.....................#.............................................",
  "......................##..........................................................................................................",
  "...........#............#.........................................................#.....#.....#....................#..............",
  "#.............#..........#...............#..#.......................................#..............................#..............",
  "#.......................................#........#....#.......................................................#..#.............#..",
  ".......................#...#.....#..#...........................#...........#.........................#...#...#................#..",
  "#...............................................................#........................................#.....................#..",
  "..#.....................#............................##..........#..................##...#.....................................#..",
  ".......#...................##..........................................#........#.................................................",
  ".........................................................#............................................#...............##..........",
  ".......................#......#..............................................................................................#....",
  "...........#.......................................#.................................#..........#.............#..................#",
  "....#.............#......#............................#........................#...................#......#.....#..........#......",
  ".................................................................#................................#...............................",
  "..........................................................#.......................#...#...........................................",
  ".#............#...........................................#............................#..............................#...#.#.....",
  "..#.................................................#.............................................#.....................#.........",
  ".....#...............#...#.......................#.......................#......................................#...........#.....",
  "...........#...#................................#.............................#........#.........................................#",
  "..............................#.....................#......................#...#................................#.................",
  ".........#.....................................................#...#......................................#................#......",
  ".....#.....................#.................................#...................................................#....#......#....",
  "................#.........#.........................#...........#...#..............................................#..............",
  ".................................#....................................................................#..................#......#.",
  "#..............#......................................................................#.....#.....................................",
  ".............#......#..............##.#............#.#.....................#..........#.......#..........................#........",
  ".......#............#.................#...........................................................#.............................#.",
  "...........................#.......................#..................#....#....................................#.................",
  "....#.....##...........................................#...........#.............#........................#.....#.................",
  "............................#..............................................##..........#..................#.......#...............",
  "#.............................#.............#...............................#..........#...#.....................................#",
  ".............#.......#.....................................#...###......##...............#..#..............#.........#............",
  ".......#......##.....#..................#....................................#............#................#...................#..",
  "..............#......................#............#........#.....................................................#.........#....#.",
  ".............#.......#...............................................##......#...........#...........#............................",
  "#.#....#..............................................................#.........................................#...............#.",
  "...#....#........................#.#.......#.....................#.............................#.#......................#.#.......",
  ".##........................................................#.#...................#.....#.................................#........",
  "............................#.#..................................#....#...........................................................",
  "..................................................#......#...............#...............................#..#..#.......#..........",
  "..........#......................#..........#.........................#...............#..##.....................#.................",
  "...#.......#.........................................................#............#.........#...#................................#",
  "....................#...................................#..........#.....#...#..#........#............#................#..........",
  "...............................#........#.....................................#.....................................#.........#...",
  "....#....................#...................................#.#........................#.........................................",
  ".........#............................#.....................#.............#...........##.........#................................",
  ".............................................##........................................#......#................................#..",
  "...#...............................#.#...#...........#.............................#.............................................#",
  ".............................#...........#................#..................................................#............#.......",
  "................#....................................................................................#..#.#.......................",
  "...#.............#.#..#.......................#.................#...............#..#....#..............#............#......#......",
  "...........#......#............................#.....#..........#.#.................#..........#...........#...............#...#..",
  "....#..................#...........................#.........#............#........#..........#..............................#....",
  "..........#.......#...................#......#.......#.......#....................#.....................................#.........",
  "...#....................................................#......#...#...................#.....................#....................",
  "....................#..#.....#......#...................#............#.......................................#...............#....",
  ".........................#.......#.....#..#.......#...........#......##..............................#.........#..................",
  ".#...........#...#.........#....#...#.......#....#........................#...................#...#..................#............",
  ".........##......#..............................#....................#..#...#..................#............................#....."]
// field = [
//   "....#.....",
//   ".........#",
//   "..........",
//   "..#.......",
//   ".......#..",
//   "..........",
//   ".#..^.....",
//   "........#.",
//   "#.........",
//   "......#...",
// ];
let row_pos, col_pos;
const height = field.length - 1;
const width = field[0].length - 1;
let direction = "up";
field.every((row, index) => {
  const r = row.indexOf("^");
  if (r >= 0) {
    row_pos = index;
    col_pos = r;
    return false;
  } else return true;
});

const nextMoveIn = (row_pos, col_pos, direction) => {
  if (!path.includes(`${row_pos},${col_pos}`))
    path.push(`${row_pos},${col_pos}`)
  switch (direction) {
    case "up":
      return row_pos !== "0";
    case "down":
      return row_pos !== height;
    case "left":
      return col_pos !== 0;
    case "right":
      return col_pos !== width;
  }
};

let path = [];
while (nextMoveIn(row_pos, col_pos, direction)) {
  if (!path.includes(`${row_pos},${col_pos}`))
    path.push(`${row_pos},${col_pos}`);

  switch (direction) {
    case "up":
      if (field[row_pos - 1][col_pos] === "#") {
        direction = "right";
      } else row_pos--;
      break;
    case "down":
      if (field[row_pos + 1][col_pos] === "#") {
        direction = "left";
      } else row_pos++;
      break;
    case "left":
      if (field[row_pos][col_pos - 1] === "#") {
        direction = "up";
      } else col_pos--;
      break;
    case "right":
      if (field[row_pos][col_pos + 1] === "#") {
        direction = "down";
      } else col_pos++;
      break;
  }
}

console.log(path);
